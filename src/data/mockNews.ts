export const CATEGORY_MAP: Record<string, string> = {
  latest: "সর্বশেষ",
  politics: "রাজনীতি",
  bangladesh: "সারাদেশ", // Renamed to Saradesh as per request
  capital: "রাজধানী",
  crime: "অপরাধ",
  world: "বিশ্ব",
  business: "বাণিজ্য",
  opinion: "মতামত",
  sports: "খেলা",
  entertainment: "বিনোদন",
  technology: "প্রযুক্তি",
  education: "শিক্ষা",
  lifestyle: "জীবনযাপন",
  jobs: "চাকরি",
  dhaka: "ঢাকা",
  chattogram: "চট্টগ্রাম",
  rajshahi: "রাজশাহী",
  khulna: "খুলনা",
  barishal: "বরিশাল",
  sylhet: "সিলেট",
  rangpur: "রংপুর",
  mymensingh: "ময়মনসিংহ"
};

// --- REAL AUTHENTIC HEADLINES (Curated from Prothom Alo / BBC vibe) ---
export const HEADLINES_DB: Record<string, string[]> = {
  politics: [
    "সংসদে বিরোধী দলের ওয়াকআউট, বাজেট নিয়ে তীব্র সমালোচনা",
    "নির্বাচন কমিশন গঠনে নতুন আইন করার তাগিদ সুশীল সমাজের",
    "তৃণমূল নেতাদের ক্ষোভ প্রশমনে দলের হাইকমান্ডের জরুরি বৈঠক",
    "রাজনৈতিক দলগুলোর সঙ্গে সংলাপে বসছে অন্তর্বর্তী সরকার",
    "ঢাকা মহানগরে বড় শোডাউনের প্রস্তুতি নিচ্ছে প্রধান দুই জোট",
    "ভোটের মাঠ দখলে রাখতে সব কেন্দ্রে কমিটি করছে সরকারি দল",
    "দলের বিদ্রোহী প্রার্থীদের বিরুদ্ধে কঠোর ব্যবস্থা নেওয়ার হুঁশিয়ারি",
    "কূটনৈতিক পাড়ায় জোর তৎপরতা: বিদেশি রাষ্ট্রদূতদের সঙ্গে বৈঠক",
    "রাজনৈতিক মামলায় জামিন পেলেন কেন্দ্রীয় ১০ নেতা",
    "তত্ত্বাবধায়কের দাবিতে রাজপথে অনড় অবস্থানে বিরোধী জোট",
    "মন্ত্রিসভায় রদবদল: নতুন মুখ আসছেন কারা?",
    "গণতন্ত্রের ভবিষ্যৎ নিয়ে বিশিষ্ট নাগরিকদের উদ্বেগ",
    "উপজেলা নির্বাচনে দলীয় প্রতীক না রাখার সিদ্ধান্ত চূড়ান্ত",
    "শপথ নিলেন নবনির্বাচিত মেয়র ও কাউন্সিলররা",
    "রাজনীতিতে তরুণদের অংশগ্রহণ বাড়ানোর আহ্বান রাষ্ট্রপতির"
  ],
  bangladesh: [
    "পদ্মা সেতুতে রেল যোগাযোগ: দক্ষিণাঞ্চলে নতুন অথনৈতিক সম্ভাবনা",
    "শৈত্যপ্রবাহে কাঁপছে দেশ: চুয়াডাঙ্গায় সর্বনিম্ন তাপমাত্রা ৬ ডিগ্রি",
    "ডেঙ্গু পরিস্থিতি নিয়ন্ত্রণে ঢাকাজুড়ে বিশেষ মশক নিধন অভিযান",
    "সুন্দরবন রক্ষায় ইউনেস্কোর নতুন নির্দেশনা: পর্যটনে কড়াকড়ি",
    "মেট্রোরেলের সময়সীমা বাড়াল কর্তৃপক্ষ: রাত ১০টা পর্যন্ত চলবে ট্রেন",
    "প্রাথমিক শিক্ষক নিয়োগ পরীক্ষার তারিখ ঘোষণা: প্রার্থী ২ লাখ",
    "পাহাড় ধসের ঝুঁকিতে বান্দরবানের ১০ হাজার পরিবার: সরানোর উদ্যোগ",
    "হাওরের ফসল রক্ষায় টেকসই বাঁধ নির্মাণের দাবিতে মানববন্ধন",
    "কক্সবাজারে পর্যটকদের ভিড়, হোটেলগুলোতে ঠাঁই নেই",
    "সিলেটে বন্যা পরিস্থিতির উন্নতি, ঘরে ফিরছে মানুষ",
    "গ্যাসের সংকট: রাজধানীতে সকাল-সন্ধ্যা চুলা জ্বলে না",
    "নিত্যপণ্যের বাজারে আগুন: পেঁয়াজের কেজি ২০০ টাকা",
    "কারিগরি শিক্ষায় গুরুত্ব দিচ্ছে সরকার: নতুন ১০০ পলিটেকনিক",
    "নদী দূষণ রোধে কঠোর অবস্থানে পরিবেশ অধিদপ্তর",
    "রোহিঙ্গা প্রত্যাবাসনে মিয়ানমারের ওপর আন্তর্জাতিক চাপ বাড়ছে",
  ],
  world: [
    "রাশিয়া-ইউক্রেন যুদ্ধ: শান্তি আলোচনায় বসতে রাজি মস্কো ও কিয়েভ",
    "গাজায় যুদ্ধবিরতির প্রস্তাব পাস জাতিসংঘে: ইসরায়েলের আপত্তি",
    "যুক্তরাষ্ট্রের নির্বাচনে হাড্ডাহাড্ডি লড়াইয়ের আভাস: ট্রাম্প বনাম বাইডেন",
    "তীব্র দাবদাহে পুড়ছে ইউরোপ, রেকর্ড তাপমাত্রা দেখল প্যারিস",
    "চাঁদে মানুষ পাঠাতে নতুন রকেট ‘আর্টেমিস’ উন্মোচন নাসার",
    "ব্রাজিলে বন্যায় শতাধিক প্রাণহানি, জরুরি অবস্থা জারি",
    "জাতিসংঘের অধিবেশনে জলবায়ু ইস্যু গুরুত্ব পাচ্ছে: বিশ্বনেতাদের প্রতিশ্রুতি",
    "তাইওয়ান ঘিরে চীনের সামরিক মহড়া অব্যাহত",
    "তুরস্ক-সিরিয়া সীমান্তে আবারও ভূমিকম্পের আঘাত: আতঙ্কিত মানুষ",
    "যুক্তরাজ্যে মুদ্রাস্ফীতি নিয়ন্ত্রণে নতুন পদক্ষেপ ঋষি সুনাকের",
    "ভারতে জি-২০ সম্মেলন: বিশ্বনেতাদের মিলনমেলা দিল্লিতে",
    "পাকিস্তান সংকটে আইএমএফের নতুন শর্ত: বিপাকে সরকার",
    "আফগানিস্তানে নারী শিক্ষার ওপর নতুন বিধিনিষেধ তালেবানের",
    "সৌদি আরব ও ইরানের কূটনৈতিক সম্পর্ক পুনঃস্থাপন: মধ্যপ্রাচ্যে প্রভাব",
    "উত্তর কোরিয়ার ক্ষেপণাস্ত্র পরীক্ষায় উদ্বিগ্ন জাপান ও দক্ষিণ কোরিয়া"
  ],
  business: [
    "শেয়ারবাজারে উল্লম্ফন, সূচক বাড়ল ১৫০ পয়েন্ট: বিনিয়োগকারীদের স্বস্তি",
    "রমজানে নিত্যপণ্যের দাম নিয়ন্ত্রণে কঠোর সরকার: টাস্কফোর্স গঠন",
    "রপ্তানি আয়ে নতুন রেকর্ড, প্রবৃদ্ধি ১৫ শতাংশ: পোশাক খাতের অবদান",
    "নতুন করে বাড়ল স্বর্ণের দাম: ভরিতে রেকর্ড ১ লাখ টাকা ছাড়াল",
    "ব্যাংকিং খাতে সুশাসন ফেরাতে নতুন নীতিমালা জারি বাংলাদেশ ব্যাংকের",
    "বৈদেশিক মুদ্রার রিজার্ভ বাড়াতে প্রবাসীদের প্রণোদনা বাড়ল",
    "স্টার্টআপে বিনিয়োগ বাড়াচ্ছে বিদেশী প্রতিষ্ঠানগুলো: বাংলাদেশি তরুণদের সাফল্য",
    "পোশাক শিল্পে অস্থিরতা: মালিক-শ্রমিক বৈঠকে মজুরি বৃদ্ধির আশ্বাস",
    "বাজেটে করমুক্ত আয়ের সীমা ৪ লাখ টাকা করার প্রস্তাব এফবিসিসিআইয়ের",
    "পুঁজিবাজারে তালিকাভুক্ত হচ্ছে আরও ৫ কোম্পানি: আইপিও অনুমোদন",
    "জ্বালানি তেলের দাম সমন্বয়ে অটোমেটেড প্রাইসিং চালু হচ্ছে মার্চে",
    "ঈদের আগে রেমিট্যান্স প্রবাহে জোয়ার: ২ বিলিয়ন ডলার ছাড়াল",
    "খেলাপি ঋণ কমাতে কঠোর অবস্থানে কেন্দ্রীয় ব্যাংক",
    "ফ্রিল্যান্সারদের জন্য সুখবর: আয়ের ওপর কর মওকুফ",
    "ভারত থেকে চাল আমদানি বাড়াচ্ছে সরকার: বাজার নিয়ন্ত্রণের চেষ্টা"
  ],
  sports: [
    "বিপিএলে ঢাকার দাপুটে জয়, তামিমের অর্ধশতক",
    "বিশ্বকাপের দল ঘোষণা: চমক রেখে ১৫ সদস্যের স্কোয়াড, বাদ পড়লেন রিয়াদ",
    "মেসির জাদুতে ইন্টার মায়ামির ঐতিহাসিক জয়: জোড়া গোল",
    "টেস্ট ক্রিকেটে বাংলাদেশের নতুন রেকর্ড: সাকিবের মাইলফলক",
    "চ্যাম্পিয়ন্স লিগ: রিয়াল মাদ্রিদের নাটকীয় প্রত্যাবর্তন, শেষ মুহূর্তে গোল",
    "অলিম্পিকে স্বর্ণ জয়ের লক্ষ্যে দেশ ছাড়লেন আরচাররা",
    "নিউজিল্যান্ডের মাটিতে প্রথম টেস্ট জয় বাংলাদেশের: ইতিহাসের পাতায় নাম",
    "আইপিএলে দল পেলেন না কোনো বাংলাদেশি তারকা: হতাশা সমর্থকদের",
    "ফুটবল র‍্যাংকিংয়ে উন্নতি, সেরা ১০০ তে বাংলাদেশ",
    "ক্রিকেট বোর্ডের বার্ষিক সাধারণ সভায় বড় সিদ্ধান্ত: আঞ্চলিক ক্রিকেট কাঠামো",
    "নারী সাফ চ্যাম্পিয়নশিপ: নেপালকে হারিয়ে চ্যাম্পিয়ন বাংলাদেশ",
    "টেনিস তারকা নাদালের অবসর ঘোষণা: চোখের জলে বিদায়",
    "এশিয়া কাপের ভেন্যু নিয়ে জটিলতা কাটল: পাকিস্তান ও শ্রীলঙ্কায় ম্যাচ",
    "রোনালদোর নতুন রেকর্ড: ৮৫০ গোলের মাইলফলক স্পর্শ",
    "অনূর্ধ্ব-১৯ বিশ্বকাপ: সেমিফাইনালে ভারতের মুখোমুখি বাংলাদেশ"
  ],
  entertainment: [
    "কান চলচ্চিত্র উৎসবে বাংলাদেশের নতুন সিনেমা ‘মাটির প্রজার দেশে’",
    "শাকিবের নতুন লুক প্রকাশ: ভক্তদের উন্মাদনা, ভাইরাল পোস্টার",
    "ওটিটিতে আসছে সত্যজিৎ রায়ের কালজয়ী গল্প অবলম্বনে সিরিজ",
    "জাতীয় চলচ্চিত্র পুরস্কার ঘোষণা: সেরা অভিনেতা চঞ্চল, অভিনেত্রী জয়া",
    "বলিউডে অভিষেকেই বাজিমাত করলেন বাংলাদেশি অভিনেত্রী",
    "সঙ্গীত শিল্পী অরূপের ৫০ বছর পূর্তিতে বিশেষ কনসার্ট: টিকিটের হাহাকার",
    "হলিউডের নতুন সুপারহিরো মুভিতে চমক: ভিলেন চরিত্রে কে?",
    "বইমেলায় আসছে জয়ার লেখা প্রথম বই: ভক্তদের আগ্রহ",
    "নাটকে ফিরছেন আফরান নিশো, ভক্তদের অপেক্ষা শেষ",
    "অস্কারের দৌড়ে বাংলাদেশের 'মৃত্তিকা মায়া': আশাবাদী পরিচালক",
    "শাহরুখ খানের নতুন সিনেমার ট্রেলার প্রকাশ: ভিউয়ের রেকর্ড",
    "সঙ্গীত তারকাদের মিলনমেলা: চ্যানেল আই মিউজিক অ্যাওয়ার্ডস",
    "জনপ্রিয় গায়িকার আকস্মিক মৃত্যুতে শোকের ছায়া",
    "কোক স্টুডিও বাংলার নতুন গানে মুগ্ধ শ্রোতারা",
    "ঈদে মুক্তি পাচ্ছে ৫টি সিনেমা: হল মালিকদের প্রস্তুতি"
  ],
  opinion: [
    "গণতন্ত্রের সংকট ও আমাদের করণীয়: ড. আসিফ নজরুল",
    "জলবায়ু পরিবর্তন: বাংলাদেশের জন্য অশনিসংকেত",
    "শিক্ষাব্যবস্থার সংস্কার: কিছু প্রস্তাবনা",
    " যানজট নিরসন: মেট্রোরেল কি যথেষ্ট?",
    " দ্রব্যমূল্যের ঊর্ধ্বগতি: সাধারণের নাভিশ্বাস",
    " ডিজিটাল নিরাপত্তা আইন: বাকস্বাধীনতার অন্তরায়?",
    " যুব সমাজের অবক্ষয়: কারণ ও প্রতিকার",
    " নারীর ক্ষমতায়ন: কতদূর এগিয়েছে বাংলাদেশ?",
    " ক্রিকেট ও রাজনীতি: একাকার যখন",
    " বিশ্বমন্দার প্রভাব: বাংলাদেশের প্রস্তুতি কেমন?"
  ],
  technology: [
    "কৃত্রিম বুদ্ধিমত্তার নতুন চমক: চ্যাটজিপিটির চেয়েও শক্তিশালী মডেল",
    "বাংলাদেশে ফাইভ-জি সেবা সম্প্রসারণে নতুন উদ্যোগ",
    "স্মার্টফোন বাজারে ধস, বিক্রি কমেছে ২০ শতাংশ",
    "মহাকাশে সফল অভিযান: নতুন গ্রহের সন্ধান পেল নাসা",
    "সাইবার নিরাপত্তা ঝুঁকিতে দেশের আর্থিক খাত: সতর্কবার্তা",
    "গুগলের নতুন পিক্সেল ফোন: ক্যামেরা দিয়ে জয় করল বাজার",
    "ফ্রিল্যান্সারদের ডলার আয়ে নতুন রেকর্ড",
    "ফেসবুকের নতুন ফিচার: কনটেন্ট ক্রিয়েটরদের জন্য সুখবর",
    "আইফোন ১৫ প্রো ম্যাক্স: কী আছে নতুন এই ডিভাইসে?",
    "টেক স্টার্টআপে বিনিয়োগ বাড়াচ্ছে বিদেশী কোম্পানিগুলো",
    "রকেটের সফল উৎক্ষেপণ: স্পেসএক্স-এর নতুন মাইলফলক",
    "ল্যাপটপের দাম কমছে: শিক্ষার্থীদের জন্য সুখবর",
    "ভিডিও গেম ইন্ডাস্ট্রিতে বুম: বিলিয়ন ডলারের বাজার",
    "সৌরবিদ্যুৎ চালিত গাড়ি: পরিবেশবান্ধব প্রযুক্তির জয়জয়কার",
    "মেটাভার্স নিয়ে নতুন পরিকল্পনা জাকারবার্গের"
  ],
  education: [
    "এইচএসসি পরীক্ষার ফল প্রকাশ: জিপিএ-৫ পেল ২ লাখ শিক্ষার্থী",
    "ঢাকা বিশ্ববিদ্যালয়ের ভর্তি পরীক্ষায় বড় পরিবর্তন",
    "প্রাথমিক শিক্ষায় ঝরে পড়া রোধে নতুন প্রকল্প",
    "বেসরকারি বিশ্ববিদ্যালয়ে টিউশন ফি কমানোর দাবি শিক্ষার্থীদের",
    "স্কুল ব্যাংকিংয়ে আগ্রহ বাড়ছে শিক্ষার্থীদের: জমার পরিমাণ বাড়ল",
    "উচ্চশিক্ষায় বিদেশগামী শিক্ষার্থীদের সংখ্যা দ্বিগুণ",
    "শিক্ষক নিয়োগে স্বচ্ছতা নিশ্চিত করার নির্দেশ আদালতের",
    "নতুন শিক্ষাক্রম নিয়ে অভিভাবকদের মিশ্র প্রতিক্রিয়া",
    "মেডিকেল ভর্তি পরীক্ষা: আসন প্রতি লড়বে ২০ জন",
    "বুয়েটে গবেষণা খাতে বরাদ্দ বাড়ানোর দাবি",
    "কারিগরি শিক্ষায় গুরুত্ব দিচ্ছে সরকার: কর্মসংস্থান বৃদ্ধি",
    "পিএইচডি গবেষণায় বিশ্বমানের সুযোগ সৃষ্টির উদ্যোগ",
    "শীতকালীন ছুটিতে স্কুল বন্ধ ঘোষণা: আনন্দিত শিশুরা",
    "বই উৎসবে নতুন বইয়ের ঘ্রাণে মাতোয়ারা শিক্ষার্থীরা",
    "স্কলারশিপ নিয়ে জাপান যাচ্ছেন ৫০০ বাংলাদেশী শিক্ষার্থী"
  ],
  lifestyle: [
    "শীতে ত্বকের যত্ন: ঘরোয়া উপায়ে পান উজ্জ্বল ত্বক",
    "স্বাস্থ্যকর ডায়েট: ওজন কমাতে কী খাবেন, কী বাদ দেবেন?",
    "ঢাকার কাছেই একদিনের ট্যুর: ঘুরে আসুন প্রকৃতির মাঝে",
    "ঈদের ফ্যাশন: এবার বাজারে নতুন কী এলো?",
    "মানসিক স্বাস্থ্য ভালো রাখতে প্রতিদিনের ৫টি অভ্যাস",
    "অফিস ও সংসারের চাপ সামলানোর সহজ উপায়",
    "শিশুর বেড়ে ওঠা: পুষ্টিকর খাবারের তালিকা",
    "ঘরে বসেই করুন চুলের স্পা: জানুন সঠিক নিয়ম",
    "বিয়ে বাড়িতে সাজগোজ: কেমন হবে মেকআপ?",
    "পুরান ঢাকার ঐতিহ্যবাহী খাবারের খোঁজে",
    "হতাশা কাটিয়ে প্রশান্তির খোঁজ: যোগব্যায়ামের উপকারিতা",
    "কম খরচে ঘর সাজানোর টিপস: পাল্টে ফেলুন ঘরের লুক",
    "বর্ষায় খিচুড়ি আর ইলিশ: ভোজনরসিকদের প্রিয় মেনু",
    "বিকেলে নাস্তায় ঝটপট রেসিপি: অতিথি আপ্যায়ন"
  ],
  jobs: [
    "সরকারি চাকরিতে নতুন নিয়োগ বিজ্ঞপ্তি: পদ সংখ্যা ৫০০০",
    "বেসরকারি ব্যাংকে ক্যারিয়ার গড়ার সুযোগ: বেতন ৮০ হাজার",
    "বিসিএস প্রিলিমিনারি পরীক্ষার তারিখ ঘোষণা",
    "আইটি সেক্টরে চাকরির বাজার: চাহিদা বাড়ছে দক্ষ কর্মীর",
    "সাক্ষাৎকারে সফল হওয়ার ১০টি কার্যকর টিপস",
    "দেশি প্রতিষ্ঠানে উচ্চ বেতনে চাকরির সুযোগ",
    "ফ্রিল্যান্সিং করে স্বাবলম্বী হওয়ার গল্প",
    "CV এবং কভার লেটার লেখার সঠিক নিয়ম",
    "শিক্ষকতা পেশায় নিয়োগ: আবেদন চলছে",
    "নার্সিং ও মেডিকেল সেক্টরে বিশাল নিয়োগ বিজ্ঞপ্তি",
    "এনজিওতে চাকরির সুযোগ: মাঠ পর্যায়ে কাজ",
    "বিদেশে চাকরির প্রলোভন: সতর্ক থাকার পরামর্শ",
    "চাকরির বাজারে নতুন ট্রেন্ড: রিমোট জবের জনপ্রিয়তা",
    "স্টার্টআপে ইন্টার্নশিপ: ক্যারিয়ার শুরুর ভালো মাধ্যম",
    "রেলওয়েতে নতুন নিয়োগ: একাধিক পদে আবেদনের সুযোগ"
  ]
};

// --- AUTHENTIC IMAGES (Reliable Unsplash IDs) ---
export const IMAGES_DB: Record<string, string[]> = {
  politics: [
    "1577962917302-cd874c4e31d2", "1518770660439-4636190af475", "1496181133206-80ce9b88a853", 
    "1494178270175-e96de2971df9", "1550751827-4bd374c3f58b", "1557992260-ec58e38d363c", 
    "1611162617474-5b21e879e113"
  ],
  bangladesh: [
    "1518770660439-4636190af475", "1496181133206-80ce9b88a853", 
    "1550751827-4bd374c3f58b", "1611162617474-5b21e879e113", 
    "1518770660439-4636190af475"
  ],
  world: [
    "1451187580459-43490279c0fa", "1476480862126-209bfaa8edc8", 
    "1520106212299-d99c443e4568", "1496181133206-80ce9b88a853", 
    "1550751827-4bd374c3f58b", "1502602898657-3e91760cbb34"
  ],
  sports: [
    "1611162617474-5b21e879e113", "1517649763962-0c623066013b"
  ],
  business: [
    "1460925895917-afdab827c52f", "1554469384-e58fac16e23a", "1454165804606-c3d57bc86b40"
  ],
  entertainment: [
    "1496337589254-7e19d01cec44", "1470225620780-dba8ba36b745", "1511671782779-c97d3d27a1d4", 
    "1485846234645-a62644f84728" 
  ],
  opinion: [
    "1455390582262-044cdead277a", "1453928582365-b6ad33cbcf64", "1516321497487-e288fb19713f", 
    "1532012197267-da84d127e765", "1506784983877-45594efa4cbe", 
    "1522202176988-66273c2fd55f", "1544716278-ca5e3f4abd8c"
  ],
  technology: [
    "1518770660439-4636190af475", "1496181133206-80ce9b88a853", 
    "1550751827-4bd374c3f58b", "1611162617474-5b21e879e113",
    "1461749280684-dccba630e2f6", "1488590528505-98d2b5aba04b" 
  ],
  education: [
    "1503676260728-1c00da094a0b", "1546410531-bb4caa6b424d",
    "1497633762265-9d179a990aa6", "1509062522246-3755977927d7", "1491841550275-ad7854e35ca6",
    "1434030216411-0b793f4b4173", "1532012197267-da84d127e765"
  ],
  lifestyle: [
    "1540189549336-e6e99c3679fe", "1507525428034-b723cf961d3e",
    "1525547719571-a2d4ac8945e2", "1476514525535-07fb3b4ae5f1", "1469854523086-cc02fe5d8800"
  ],
  jobs: [
    "1486312338219-ce68d2c6f44d", "1542744173-8e7e53415bb0", "1521791136064-7986c2920216",
    "1573496359142-b8d87734a5a2", "1542626991-cbc4e32524cc", "1516321497487-e288fb19713f"
  ]
};

// --- DETERMINISTIC GENERATOR ---
// Pseudo-random function based on string seed
const getHash = (str: string) => {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        hash = (hash * 31 + str.charCodeAt(i)) | 0; // consistent 32-bit integer
    }
    return Math.abs(hash);
};

export const getStaticImage = (category: string, index: number) => {
  const pools = IMAGES_DB[category] || IMAGES_DB.world; // Fallback to world
  return `https://images.unsplash.com/photo-${pools[index % pools.length]}?q=80&w=800&auto=format&fit=crop`;
};
export const getArticleBySlug = (slug: string) => {
    // 1. Parse ID: "politics-45"
    const parts = slug.split('-');
    const idStr = parts.pop() || "0";
    const index = parseInt(idStr, 10);
    const categoryName = parts.join('-');
    
    // 2. Validate Category & Handle Divisions
    // Logic: If category is a division, use 'bangladesh' headlines but tag as division
    const isDivision = ["dhaka", "chattogram", "rajshahi", "khulna", "barishal", "sylhet", "rangpur", "mymensingh"].includes(categoryName);
    const isCapital = categoryName === 'capital';
    const isCrime = categoryName === 'crime';
    
    let sourceCategory = categoryName;

    // Map new categories to existing DB pools for content
    if (isDivision || isCapital) sourceCategory = 'bangladesh';
    if (isCrime) sourceCategory = 'bangladesh'; // Crime often local
    
    let category = HEADLINES_DB[sourceCategory] ? sourceCategory : 'latest';
    
    // 3. Map "Latest" to random categories mixed
    if (category === 'latest' && !HEADLINES_DB[categoryName]) {
       const cats = Object.keys(HEADLINES_DB);
       category = cats[index % cats.length];
    }
    
    // 4. Deterministic content selection
    const titles = HEADLINES_DB[category] || HEADLINES_DB.politics;
    let title = titles[index % titles.length];
    
    // DYNAMIC TITLE MODIFICATION FOR REGIONS
    if (isDivision) {
        // Prepend Division Name to simulate regional filtering
        const divisionName = CATEGORY_MAP[categoryName];
        // Ensure we don't double prepend if title already has it (unlikely in mock but good practice)
        if (!title.startsWith(divisionName)) {
             title = `${divisionName}: ${title}`;
        }
    } else if (isCapital) {
         if (!title.includes("ঢাকা")) title = `রাজধানীতে: ${title}`;
    } else if (isCrime) {
         title = `ক্রাইম ওয়াচ: ${title}`;
    }
    
    // 5. Image logic (unchanged)
    const hash = getHash(title + index); 
    const image = getStaticImage(category, hash);
    const label = CATEGORY_MAP[categoryName] || CATEGORY_MAP[category] || "সংবাদ";

    return {
        id: slug,
        title: title,
        image: image,
        category: label,
        catSlug: categoryName, // Keep original slug (e.g., 'dhaka') so breadcrumbs work
        author: ["নিজস্ব প্রতিবেদক", "সিনিয়র করেসপন্ডেন্ট", "ডেস্ক রিপোর্ট", "বিশেষ প্রতিনিধি"][hash % 4],
        date: "২০ জানুয়ারি ২০২৬", // Hardcoded for demo consistency
        time: `${(hash % 12) + 1} ঘণ্টা আগে`,
        summary: `বিস্তারিত জানতে ক্লিক করুন... ${title} সম্পর্কে সর্বশেষ তথ্য ও বিশ্লেষণ। বিশেষজ্ঞদের মতামত ও সরেজমিনে প্রতিবেদনের ভিত্তিতে তৈরি এই নিউজ।`,
        content: `
            ঢাকা, ২০ জানুয়ারি ২০২৬ - ${title}
            
            সম্প্রতি এই বিষয়টি নিয়ে ব্যাপক আলোচনার ঝড় উঠেছে। বিশেষজ্ঞদের মতে, এটি দেশের জন্য অত্যন্ত গুরুত্বপূর্ণ একটি ঘটনা। সংশ্লিষ্টরা মনে করছেন, এখনই উপযুক্ত সময় পদক্ষেপ নেওয়ার।
            
            সরেজমিনে দেখা গেছে, সাধারণ মানুষের মধ্যে এ নিয়ে মিশ্র প্রতিক্রিয়া রয়েছে। কেউ কেউ বিষয়টিকে স্বাগত জানালেও, অনেকেই আশঙ্কা প্রকাশ করেছেন। তবে সরকারের পক্ষ থেকে আশ্বস্ত করা হয়েছে যে, জনগণের স্বার্থেই সব করা হবে।
            
            "আমরা চাই স্বচ্ছতা ও জবাবদিহিতা নিশ্চিত করতে," বলেছেন সংশ্লিষ্ট দপ্তরের একজন ঊর্ধ্বতন কর্মকর্তা। তিনি আরও যোগ করেন, "ভবিষ্যতে এ ধরনের উদ্যোগ আরও নেওয়া হবে।"
            
            পরিসংখ্যান বলছে, গত কয়েক বছরে এ খাতে অভূতপূর্ব উন্নয়ন হয়েছে। তবে চ্যালেঞ্জও কম নয়। বিশেষ করে অবকাঠামোগত উন্নয়ন ও দক্ষ জনবলের অভাব একটি বড় বাধা।
            
            বিরোধী দলগুলো অবশ্য এই দাবি মানতে নারাজ। তাদের মতে, এটি কেবল চোখের ধুলো। তবে রাজনীতি সচেতন মহল মনে করছে, গঠনমূলক সমালোচনাই গণতন্ত্রের সৌন্দর্য।
            
            আগামী দিনগুলোতে পরিস্থিতি কোন দিকে মোড় নেয়, সেটাই এখন দেখার বিষয়। তবে এটা নিশ্চিত যে, ${title}-এর প্রভাব সুদূরপ্রসারী হবে।
        `,
        relatedVideo: (slug === 'politics-0' || slug === 'politics-1') ? {
            id: slug === 'politics-0' ? '10153231379946729' : 'dQw4w9WgXcQ',
            source: (slug === 'politics-0' ? 'facebook' : 'youtube') as 'facebook' | 'youtube',
            title: `সম্পর্কিত ভিডিও: ${title}`
        } : undefined
    };
};

export interface NewsItem {
  id: string;
  title: string;
  summary: string;
  category: string;
  catSlug?: string;
  image: string;
  author: string;
  date: string; // New Date Field
  time: string;
  content: string;
  relatedVideo?: {
    id: string;
    source: 'youtube' | 'facebook';
    title?: string;
  };
}

// Helper: Get Contextual Related News
export const getRelatedNews = (currentTitle: string, category: string, count: number) => {
    // 1. Tokenize Title (Remove common words if needed, but simple split matches well for now)
    const tokens = currentTitle.split(' ').filter(t => t.length > 3); // Filter short words
    const categoryHeadlines = HEADLINES_DB[category] || HEADLINES_DB.politics || [];
    
    // 2. Find Matches
    const matchedIndices: number[] = [];
    categoryHeadlines.forEach((headline, index) => {
        if (headline === currentTitle) return; // Skip self
        
        const hasMatch = tokens.some(token => headline.includes(token));
        if (hasMatch) {
            matchedIndices.push(index);
        }
    });

    // 3. Fill with Pseudo-Randoms (Deterministic) if not enough matches
    // We use the currentTitle's hash as a seed to ensure the "random" fill is always the same for this article
    let seed = getHash(currentTitle);
    
    while (matchedIndices.length < count) {
        // Simple Linear Congruential Generator (LCG) for deterministic pseudo-randomness
        seed = (seed * 9301 + 49297) % 233280;
        const randomIdx = seed % categoryHeadlines.length;
        
        if (!matchedIndices.includes(randomIdx) && categoryHeadlines[randomIdx] !== currentTitle) {
            matchedIndices.push(randomIdx);
        }
        
        // Break loop if we've exhausted options (prevent infinite loop in edge cases)
        if (matchedIndices.length >= categoryHeadlines.length - 1) break;
    }

    // 4. Return Articles
    return matchedIndices.slice(0, count).map(index => {
        return getArticleBySlug(`${category}-${index}`);
    });
};

// Helper: Get List of News (Legacy / General Purpose)
export const generateNewsList = (category: string, count: number, offset: number = 0) => {
    return Array.from({ length: count }).map((_, i) => {
        const id = offset + i;
        return getArticleBySlug(`${category}-${id}`);
    });
};
